$(function(){"use strict";function t(){f.attr("src","/pony/default"),$bgContainer.addClass("loading").find(".loading").css("background-image",'url("/loader/default")'),m.attr("src","/splat/default").off("load").on("load",function(){m.fadeIn(500,function(){$bgContainer.removeClass("loading")})})}function e(t,e){if(t=t.toLowerCase(),$slideout.attr("class")==="sort-"+t)return!1;var o=$slideoutInner.children(".tile:not([id])"),n=function(){$(this).insertAfter($slideoutInner.children(".tile:visible").last())};switch(t){case"colour":o.sort(function(t,e){var o=pusher.color($(t).data("color")),n=pusher.color($(e).data("color"));return o.hue()-n.hue()}),o.each(n);break;case"abc":o.sort(function(t,e){return $(t).data("longname").localeCompare($(e).data("longname"))}),o.each(n);break;case"newabc":var a=o.filter(".new").sort(function(t,e){return $(t).data("longname").localeCompare($(e).data("longname"))}),r=o.filter(":not(.new)").sort(function(t,e){return $(t).data("longname").localeCompare($(e).data("longname"))});a.each(n),r.each(n);break;default:return!1}$slideout.attr("class","sort-"+t),e||i("sort",t)}function o(t,e){var o=!1;if("string"==typeof t?-1===MLPNow.shortnames.indexOf(t):"undefined"==typeof MLPNow.Pony[t])return!1;if(t="string"==typeof t?MLPNow.Pony[MLPNow.shortnames.indexOf(t)]:MLPNow.Pony[t],p!==t.shortname){e||i("pony",o?"random":t.shortname),$bgContainer.addClass("loading").find(".loading").css("background-image",'url("/loader/'+t.color.substring(1)+'")');var n=0,a=$bgContainer.children(".background");a.fadeOut(500,function(){var e,o=$(this);e="pony"===o.attr("id")?"/pony/"+t.shortname:"/splat/"+t.textcolor.substring(1)+"/"+t.bgcolor.substring(1),o.attr("src",e).off("load error").on("load error",function(){return n>0?($("#pony,#splat").fadeIn(1e3,function(){$("#bgContainer").removeClass("loading")}),$(this).off("load error")):void n++})}),$(".dyn").removeClass(p).addClass(t.shortname),$slideoutInner.find(".heading").css("color",t.color),$slideoutInner.find('.tile.force-hover:not(".tile-'+(o?"random":t.shortname)+'")').removeClass("force-hover"),$slideoutInner.find('.tile:not(".force-hover").tile-'+(o?"random":t.shortname)).addClass("force-hover"),p=t.shortname}}function n(t,e){-1!==["at","12","24"].indexOf(t)&&(e||i("timeformat",t))}function a(t,e){var o=!("boolean"==typeof t?t:!MLPNow.pref.bottom);c.html(o?MLPNow.locale.show:MLPNow.locale.hide);var n=$(".tbh").stop();e?n[o?"hide":"show"]():n[o?"slideUp":"slideDown"]("fast"),d[(o?"remove":"add")+"Class"]("typcn-minus")[(o?"add":"remove")+"Class"]("typcn-plus"),e||i("bottom",!o)}function i(t,e,o){if(MLPNow.signedIn){v.stop().show();var n=window.MLPNow.pref[t];window.MLPNow.pref[t]!==e&&(window.MLPNow.pref[t]=e),clearInterval(window.prfchk),$.post("/prefupdate",{name:t,value:e},$.mkAjaxHandler(function(){if(!this.status)return window.MLPNow.pref[t]=n,$.Dialog.fail(!1,this.message);var a="typcn typcn-"+(this.status?"tick":"times"),i=v.children(".text").html();v.attr("data-status",!0).children(".text").addClass(a).html(this.message),"function"==typeof o&&o(t,e),setTimeout(function(){v.fadeOut(500,function(){v.removeAttr("data-status"),v.children(".text").removeClass(a).html(i),window.prfchk=setInterval(window.prfchkF,5e3)})},1e3)}))}}var r=!1;try{r=1===parseInt(localStorage.getItem("cookie_consent"),10)}catch(s){}$("#login").off("click").on("click",function(){var t=function(t){if(t){try{localStorage.setItem("cookie_consent",1)}catch(e){}var o=$.mk("div").attr("id","provider-selector").attr("class","align-center").append($.mk("p").text("Choose a service to sign in with"),$.mk("div").attr("class","providers").append($.mk("input").attr({"class":"btn deviantart",type:"button"}).val("DeviantArt"),$.mk("input").attr({"class":"btn google",type:"button"}).val("Google")));$.Dialog.info("Sign-in process",o,function(){$("#provider-selector").on("click","input[class]",function(){$.Dialog.wait(!1,"Redirecing you to "+this.value),window.location.href="/oauth/start/"+this.className.replace(/^btn\s/,"")})})}};r?t(!0):$.Dialog.confirm("EU Cookie Policy Notice",'In compliance with the <a href="http://ec.europa.eu/ipg/basics/legal/cookies/index_en.htm">EU Cookie Policy</a> we must inform you that our website will store cookies on your device to remember your logged in status between browser sessions.<br><br>If you would like to avoid these completly harmless pieces of information required to use this website, click "Decline" and continue browsing as a guest.<br><br>This warning will not appear again if you accept our use of persistent cookies.',["Accept","Decline"],t)}),$("#link").on("click",function(){var t=$.mk("form").attr("id","link-form").attr("class","align-center").append($.mk("p").text("Linking your different accounts will allow you to use the same settings across multiple external logins"),$.mk("p").text("Choose an account which you'd like to link to your current login"),$.mk("label").attr("class","providers").append($.mk("select").attr({name:"provider",required:!0}).append($.mk("option").attr({value:"",selected:!0}).text("(click here to select)").hide(),$.mk("option").attr("value","deviantart").text("DeviantArt"),$.mk("option").attr("value","google").text("Google"))),$.mk("div").attr("class","what-to-keep").append($.mk("p").text("Use the settings of"),$.mk("label").append($.mk("input").attr({type:"radio",name:"migrate",value:"",checked:!0,required:!0}),$.mk("span").text("this account")),"&nbsp;",$.mk("label").append($.mk("input").attr({type:"radio",name:"migrate",value:"1",required:!0}),$.mk("span").text("target account (if exists)"))));$.Dialog.request("Link acounts",t,"link-form","Link account",function(t){t.on("submit",function(e){e.preventDefault();var o=t.mkData();$.Dialog.wait(!1,"Redirecting you to "+t.find("select").children(":selected").text()),window.location.href="/link/start/"+(o.migrate?"migrate/":"")+o.provider})})}),MLPNow.timer.func=function(){var t=moment();$dateDisplay.html(t.format("LL"));var e=t.format("LTS");$timeDisplay.html(e),$("title").text(e+" - MLP Now")},MLPNow.timer.func(),MLPNow.timer.interval=setInterval(MLPNow.timer.func,500);var l=$("#toggle").on("click",a),c=l.children(".text"),d=l.children(".typcn");$("#slideoutTitle").find(".order-by").children().on("click",function(){e($(this).attr("id"))}),$("#version").on("click",function(){}),$("#charsel").on("click",function(){$body.toggleClass("opened")});var u;$("#credits").on("click",function(){if("undefined"==typeof u){u=$.mk("div").append("<p>Website coded & designed by <a href='https://github.com/SeinopSys'>SeinopSys</a></p>","<hr>","<p>List of used pony images (names are clickable)</p>");var t=$.mk("ul").css({display:"block",overflowY:"auto",maxHeight:400,listStyle:"none",padding:0,textAlign:"center"});$.each(MLPNow.Pony,function(e,o){var n=(o.favme&&"d"===o.favme[0]?"http://fav.me/":"")+o.favme;t.append('<li style="color:'+o.textcolor+'!important"><a href="'+n+'" target="_blank" style="color:'+o.textcolor+'!important">'+o.longname+"</a>"+(o.oc?" (OC)":"")+' by <a href="http://'+o.vector.toLowerCase()+'.deviantart.com/" target="_blank" style="color:'+o.textcolor+'!important">'+o.vector+"</a></li>")}),u.append(t)}$.Dialog.info("MLP Now Credits",u.clone())}),$("#signout").off("click").on("click",function(){$.Dialog.confirm("Sign out","Are you sure you want to sign out?",function(t){t&&($.Dialog.wait(!1,"Signing out"),$.post("/signout",$.mkAjaxHandler(function(){return this.status?($.Dialog.success(!1,"You have been signed out successfully"),$.Dialog.wait(!1,"Reloading"),void setTimeout(function(){window.location.reload()},1e3)):$.Dialog.fail(!1,this.message)})))})});var f=$.mk("img").attr({id:"pony","class":"background"}),m=$.mk("img").attr({id:"splat","class":"background"});$bgContainer.append(m,f),t(),e(MLPNow.pref.sort,!0);var p;o(MLPNow.pref.pony,!0),n(MLPNow.pref.timeformat,!0),a(MLPNow.pref.bottom,!0);var h;new Konami(function(){MLPNow.shortnames.push("oc"),MLPNow.Pony.push({textcolor:"#AF70CC",bgcolor:"#D19FE3",color:"#C087D7",shortname:"oc"}),o("oc",!0),clearTimeout(window.prfchk),delete window.prfchk;var t=document.createElement("style");t.innerHTML=".oc {color:#C087D7}	/* The Ultimate OC */",$(t).insertAfter("head style:last")});$("#randomTile").on("click",function(){o(h)}).hover(function(){h=$.rnd(0,MLPNow.Pony.length-1);var t=MLPNow.Pony[h],e=$(this);e.css("background","linear-gradient(to bottom, "+t.bgcolor+" 0%,"+t.textcolor+" 100%)"),e.children("span").attr("class","pony-icon "+t.shortname);var o=t.longname.split(" ");"undefined"==typeof o[1]&&(o[1]="&nbsp;"),e.children("h4").html(o.join("<br>"))},function(){var t=$(this);t.css("background","linear-gradient(to bottom, #777 0%, #777 100%)"),t.children("h4").html(MLPNow.locale.randomTile),t.children("span").attr("class","pony-icon random")});var g=$slideoutInner.children(".tile:not([id])");g.on("click",function(){var t=$(this),e=t.data("shortname");if($(this).hasClass("force-hover")||p===e){$bgContainer.addClass("loading").find(".loading").css("background-image",'url("/loader/default")');var n=0,a=$bgContainer.children(".background");a.animate({opacity:0},500,function(){var t="/"+$(this).attr("id")+"/default";$(this).attr("src",t).off("load error").on("load error",function(){n++,2===n&&a.animate({opacity:1},500,function(){$("#bgContainer").removeClass("loading"),a.off("load error")})})}),$(".dyn").removeClass(p),$("#slideoutTitle .heading").css("color","#777"),g.removeClass("force-hover"),p=void 0,i("pony",null)}else o(e)});var v=$("#gui").children(".saveIndicator")});
//# sourceMappingURL=home.min.js.map
