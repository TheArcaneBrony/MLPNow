function updclrs(){readCookie("nev")?-1!=parent.MLPNow.Pony.shortNames.indexOf(readCookie("nev"))?($("a,#reminders thead td").addClass(readCookie("nev")),$("#reminders td,table").css("border","1px solid "+currentcolor)):"random"==readCookie("nev")?($("a,#reminders thead td").addClass(tempName),$("#reminders td,table").css("border","1px solid "+currentcolor)):($("a").addClass("datgrey"),$("#reminders td,table").css("border","1px solid #777")):($("a").addClass("datgrey"),$("#reminders td,#reminders table").css("border","1px solid #777"))}function updateList(){for($("#reminders tbody tr:not(#remdef)").remove(),i=0;i<parent.reminderArray1.length;i++)$("#reminders tbody").append('<tr id="remno'+i+'">	<td class="remtxt">		<label>			<textarea rows="5" disabled required>'+parent.reminderArray1[i]+'</textarea>		</label>	</td>	<td class="remtim">		<label>			<input type="text" disabled required value="'+parent.reminderArray2[i]+'" placeholder="'+remLocale.dateFormat[lang]+'" pattern="'+parent.validDateStr+'">		</label>	</td>	<td class="remope">		<div class="btn-group">			<button class="btn btn-large btn-success action-accept" disabled></button>			<button class="btn btn-large btn-danger action-remove"></button>			<button class="btn btn-large btn-info action-modify"></button>		</div>	</td><tr>');$('textarea,input[type="text"]').attr("autocomplete","off"),$("#remdef textarea").attr("placeholder",remLocale.addNewText[lang]),$("tr input").attr("placeholder",remLocale.dateFormat[lang]).attr("pattern",parent.validDateStr),$("#dateInfo").html(parent.MLPNow.timer.datestring),$("#remdef td.remope button.btn-success").html(remLocale.add[lang]),$("tr:not(#remdef) td.remope button.btn-success").html(remLocale.accept[lang]),$("td.remope button.btn-danger").html(remLocale.remove[lang]),$("td.remope button.btn-info").html(remLocale.modify[lang]),bindHandlers(),updclrs(),parent.reminder.load()}function bindHandlers(){$("td.remope .action-remove").off("click").on("click",function(){var e=$(this).parent().parent().parent().attr("id"),t=1*e.substring(5),r=$(this).html();if(r==remLocale.cancel[lang])updateList();else{if(!confirm(remLocale.deleteConfirm[lang]))return!0;$("#"+e).hide("slow"),parent.reminderArray1.splice(t,1),parent.reminderArray2.splice(t,1),parent.reminder.save(),$(this).html(remLocale.remove[lang])}}),$("td.remope .action-modify").off("click").on("click",function(){$(this).parent().parent().parent().attr("id");$(this).parent().children(".action-accept").attr("disabled",!1),$(this).parent().parent().parent().find("textarea[disabled]").attr("disabled",!1),$(this).parent().parent().parent().find(".action-remove").html(remLocale.cancel[lang]),$(this).attr("disabled",!0)}),$("td.remope .action-accept").off("click").on("click",function(){var e=$(this).parent().parent().parent().attr("id"),t=parseInt(e.substring(5)),r=testInput(this,"modify");return"object"!=typeof r?!1:(parent.reminderArray1[t]=r.text,parent.reminderArray2[t]=r.time,parent.reminder.save(),void updateList())})}function testInput(e,t){if(e){var r=parent.scriptMatch.test($(e).parent().parent().parent().find("textarea").val()),a=$(e).parent().parent().parent().find("textarea").val().replace(parent.scriptMatch,""),n=parent.MLPNow.timer.datestring.replace(/\./g,"");if(!parent.validDate.test($(e).parent().parent().parent().find("input").val()))return modalInit("invalidDate"),!1;remTime=$(e).parent().parent().parent().find("input").val(),remTimeArray=remTime.split(".");var o=remTime.replace(/\./g,"");return n>o?(modalInit("pastDate"),!1):(-1!=parent.reminderArray2.indexOf(remTime)&&"modify"!=t?infoModalInit(1==r?["sameDate","containsCode"]:"sameDate"):1==r&&infoModalInit("containsCode"),{text:a,time:remTime})}return!1}function modalInit(e){$("#modal .alert-info").removeClass("alert-info").addClass("alert-error"),$("#modal .modal-header").html(mET.title),$(".onlyDisplayOnError").show(),$('button[data-dismiss="modal"]').html(mET.ok).removeClass("btn-info").addClass("btn-danger").attr("onclick",""),"undefined"!=typeof mET[e]?$("#modal .setErrorText").html(mET[e]):$("#modal .setErrorText").html(mET.unknownError),$("#modal").modal("show")}function infoModalInit(e){if($("#modal .alert-error").removeClass("alert-error").addClass("alert-info"),$("#modal .modal-header").html(mIT.title),$(".onlyDisplayOnError").hide(),$('button[data-dismiss="modal"]').html(mIT.ok).removeClass("btn-danger").addClass("btn-info"),"undefined"!=typeof mIT[e])$("#modal .setErrorText").html(mIT[e]);else if("object"==typeof e&&"undefined"!=typeof e.length){for(var t="",r=0,a=e.length;a>r;r++)t+=mIT[e[r]]+(a>r+1?"<hr>":"");$("#modal .setErrorText").html(t)}else $("#modal .setErrorText").html(mIT.unknownInfo);$("#modal").modal("show")}var wlhref=parent.window.location.href.substring(0,parent.window.location.href.lastIndexOf("/")+1),tempName=parent.window.tempName,currentcolor=parent.MLPNow.Pony.colors[parent.MLPNow.Pony.shortNames.indexOf(tempName)],ftoupdclrs=function(){t=setTimeout(updclrs,1),$(".ui-datepicker").css("border",function(){return"1px solid "+currentcolor})},defhtml,remText,remTime,remTimeArray,remTextHasCodeChars,i,text;"undefined"==typeof parent.reminderArray1&&(parent.reminderArray1=[]),"undefined"==typeof parent.reminderArray2&&(parent.reminderArray2=[]),parent.longtime||(window.location="../"),$(document).ready(function(){"undefined"!=typeof browser&&""!==browser&&$("#reminders").addClass(browser),$("#modal").modal({keyboard:!1,show:!1}),updateList(),$("body").show()}),$("#remdef form").on("submit",function(e){e.preventDefault();var t=testInput(this,"add");return"object"!=typeof t?!1:($("#remdef .remtxt label textarea").val("").html(""),$("#remdef .remtim label input").val(""),parent.reminderArray1.push(t.text),parent.reminderArray2.push(t.time),parent.reminder.save(),void updateList())});
//# sourceMappingURL=rem_init.min.js.map
